LoadPlugin "python"

<Plugin "python">
  ModulePath "{{Globals.PluginRoot}}/haproxy"

  Import "haproxy"

  <Module "haproxy">
    Socket "{{.Host}}:{{.Port}}"
    Interval {{.IntervalSeconds}}
    {{range .ProxiesToMonitor -}}
    ProxyMonitor "{{.}}"
    {{- end }}
    EnhancedMetrics {{if .EnhancedMetrics}}'True'{{else}}'False'{{end}}
    {{range .ExcludedMetrics -}}
    ExcludeMetric '{{.}}'
    {{- end }}
    {{range $key, $value := .ExtraDimensions}}
    Dimension {{$key}} {{$value}}
    {{- end}}
  </Module>
</Plugin>
